<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- 
Script for testing IPN (for PayPal Shop Maker 3+) 
(C) 2008-2009 e.World Technology Ltd. All rights reserved.
-->
<html>
<head>
	<title>IPN Debug</title>
<script type="text/javascript">

function testipn(f) {
	if (f.ipndata.value == '') {
		alert('Please enter data first.');
		f.ipndata.focus();
		return;
	}

	var xmlHttp = ew_CreateXMLHttp();		
	if (!xmlHttp) {
		alert('Your browser does not support XMLHTTP.');		
		return;
	}
	var rb = (f.ext[0].checked) ? f.ext[0] : f.ext[1]; // asp/php
	var url = String(location);
	var p = url.lastIndexOf('/');
	if (p > -1) url = url.substring(0, p+1);
	url += rb.value + '/ipn.' + rb.value;
	xmlHttp.open('POST', url, true);
	xmlHttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
	var fn = function() {
		if (xmlHttp.readyState == 4) {
			if (xmlHttp.responseText == '') {
				alert('No error.');
			} else {
				alert('Response from server:\n\n' + xmlHttp.responseText);
			}
		}
	}
	xmlHttp.onreadystatechange = fn;
	xmlHttp.send(f.ipndata.value);
}

// Create XMLHTTP
// Note: AJAX feature requires IE5.5+, FF1+, and NS6.2+
function ew_CreateXMLHttp() {
	if (!(document.getElementsByTagName || document.all))
		return;		
	var ret = null;
	try {
		ret = new ActiveXObject('Msxml2.XMLHTTP');
	}	catch (e) {
	    try {
	        ret = new ActiveXObject('Microsoft.XMLHTTP');
	    } catch (ee) {
	        ret = null;
	    }
	}
	if (!ret && typeof XMLHttpRequest != 'undefined')
	    ret = new XMLHttpRequest();	
	return ret;
}

</script>
</head>
<body>
<p><b>IPN Debug Script</b></p>
<form>
Scripting: <input type="radio" name="ext" value="asp" checked>ASP&nbsp;&nbsp;<input type="radio" name="ext" value="php">PHP<br><br>
Note: If you don't know which server-side scripting technology your server supports, run the <a href="index.html">Server Testing Script</a> first.<br><br>
Copy and paste the IPN data from PayPal below:<br>
<textarea cols="60" rows="10" name="ipndata"></textarea>
<br>
<input type="button" value="  Test  " onClick="testipn(this.form);">
</form>
<br><br>
</body>
</html>
